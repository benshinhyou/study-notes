# Docker Stack部署

> 本文转载至：[第14章 使用Docker Stack 部署应用 - 简书 (jianshu.com)](https://www.jianshu.com/p/3776a56bf629)

大规模场景下的多服务部署和管理是一件很难的事情。幸运的是，Docker Stack为解决该问题而生。Docker Stack 通过提供期望状态、滚动升级、简单易用、扩缩容、健康检查等特性简化了应用的管理。这些功能都封装在一个完美的声明式模型当中。

## 一. 简介

在笔记本上测试和部署应用很简单。但是这只能算是业余选手。在真实的生产环境进行多服务的应用部署和管理，这才是专业选手的水平。

幸运的是，Stack正为此而生！Stack能够在单个声明文件中定义复杂的多服务应用。Stack还提供了简单的方式来部署应用并管理完整的生命周期：初始化部署—>健康检查—>扩容—>更新—>回滚，以及其他功能。

步骤很简单。在Compose文件中定义应用，然后通过 docker stack deploy 命令完成部署和管理。Compose文件中包含了构成应用所需的完整服务栈，此外还包括了卷、网络、安全以及应用所需的其他架构。然后基于该文件使用docker stack deploy 命令来部署应用。

Stack是基于Docker Swarm之上来完成应用的部署。因此诸如安全等高级特性，其实都是来自Swarm。简而言之，Docker适用于开发和测试。Docker Stack则适用于大规模场景和生产环境。

## 二. 使用Docker Stack 部署应用

从体系结构上来讲，Stack位于Docker应用层级的最顶端。Stack基于服务进行构建，而服务又基于容器，如下图所示。

![](../images/55.png)

2.1 